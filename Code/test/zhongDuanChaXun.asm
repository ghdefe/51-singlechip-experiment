ORG 00H
AJMP MAIN

ORG 001BH
AJMP IR_T1

MAIN:
	MOV P1,#0FFH
	ACALL INIT_T1
WAIT:	JMP WAIT

INIT_T1:
	MOV TMOD,#50H
	MOV TH1,#0FFH
	MOV TL1,#0FBH

	SETB EA
	SETB ET1
	SETB TR1
	RET

IR_T1:
		MOV P1,#00H
/*
LOOP:
		MOV A,TL1
		JZ LOOP
*/

;延时防抖，通过判断P3.5电平来灭灯
LOOP:
		JNB P3.5,$
		MOV R6,#75
DELAY:
		MOV R7,#100
		DJNZ R7,$
		DJNZ R6,DELAY
		JB P3.5,LOOP


		MOV P1,#0FFH
		ACALL INIT_T1
		RETI
END

